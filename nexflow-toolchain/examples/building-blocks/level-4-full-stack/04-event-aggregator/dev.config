// =============================================================================
// L12345-04: Development Configuration (L5)
// =============================================================================

config dev
    description "Development event aggregation configuration"

    kafka:
        bootstrap_servers "localhost:9092"
        schema_registry "http://localhost:8081"

        topics:
            events:
                name "dev.events.raw"
                partitions 3
                replication 1

            metrics:
                name "dev.metrics.aggregated"
                partitions 3
                replication 1

            alerts:
                name "dev.alerts"
                partitions 1
                replication 1
    end

    flink:
        parallelism 2
        checkpoint_interval 30 seconds
        state_backend "filesystem"
    end

    // Short windows for testing
    windows:
        minute_window 1 minute
        hourly_window 1 hour

        // Allowed lateness for late events
        allowed_lateness 30 seconds
    end

    services:
        geo_service:
            url "http://localhost:8030"
            timeout 2 seconds

        baseline_metrics:
            type "rocksdb"
            path "/tmp/baseline-state"

        revenue_baseline:
            type "rocksdb"
            path "/tmp/revenue-state"
    end

    // Lower thresholds for testing
    thresholds:
        error_rate_warning 5
        error_rate_critical 20
        traffic_spike_multiplier 2
        traffic_drop_multiplier 0.5
        min_events_for_alert 10
    end

    logging:
        level "DEBUG"
    end
end
