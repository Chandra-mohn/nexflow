// =============================================================================
// L12345-03: Production Configuration (L5)
// =============================================================================

config prod
    description "Production credit decisioning configuration"

    kafka:
        bootstrap_servers "${KAFKA_BOOTSTRAP_SERVERS}"
        schema_registry "${SCHEMA_REGISTRY_URL}"
        security_protocol "SASL_SSL"

        topics:
            applications:
                name "prod.credit.applications"
                partitions 24
                replication 3

            approved:
                name "prod.credit.approved"
                partitions 24
                replication 3

            declined:
                name "prod.credit.declined"
                partitions 6
                replication 3

            review:
                name "prod.credit.manual-review"
                partitions 6
                replication 3
    end

    flink:
        parallelism 12
        checkpoint_interval 1 minute
        state_backend "rocksdb"
        state_path "s3://company-flink-state/credit-decision"
    end

    services:
        credit_bureau_service:
            url "${CREDIT_BUREAU_URL}"
            timeout 30 seconds
            retry 2
            circuit_breaker:
                threshold 5
                timeout 60 seconds

        credit_model_service:
            url "${CREDIT_MODEL_URL}"
            timeout 10 seconds
            retry 1

        customer_service:
            url "${CUSTOMER_SERVICE_URL}"
            timeout 5 seconds
            retry 2
    end

    // Production risk thresholds
    thresholds:
        min_credit_score 500
        max_dti 0.50
        max_delinquencies 3
    end

    logging:
        level "INFO"
        format "json"
    end

    metrics:
        enabled true
        labels:
            service "credit-decision"
            environment "production"
    end

    // Compliance logging
    compliance:
        audit_logging true
        pii_masking true
        retention_days 2555  // 7 years
    end
end
